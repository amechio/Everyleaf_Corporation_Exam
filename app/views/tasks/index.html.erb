<h1>タスク一覧</h1>
<p><%= notice %></p>
<%= form_with( model: @task, local: true, url: tasks_path, method: 'get' ) do |f| %>
  <div id = "search_container">
    <h4>[検索]</h4>
    <div class="search_for_title">
      <%= f.label :title, 'タスク名' %><br>
      <%= f.text_field :title %>
    </div>
    <div class="search_for_status">
      <%= f.label :status, 'ステータス' %><br>
      <%= f.select :status, options_for_select(Task.statuses) %>
    </div>
    <div class="search_for_priority:">
      <%= f.label :priority, '優先順位' %><br>
      <%= f.select :priority, options_for_select(Task.priorities) %>
    </div>
    <%= f.submit '検索する' %>
  </div>
<% end %>
<div class='each_sorts'>
  <%= link_to "タスクを登録する", new_task_path, class: 'new_task' %>
  <%= link_to "一覧を表示する", tasks_path, class: 'indicate_task_list'%>
  <%= link_to "終了期限でソートする", tasks_path(sort_limit: "true"), class: 'sort_by_limit' %>
  <%= link_to '優先順位順でソートする', tasks_path(sort_priority: 'true'), class: 'sort_by_priority' %>
</div>
<table class="tasks_list container">
  <tr class="each_headings row">
    <th class="col-md-2"><%= t('view.task') %></th>
    <th class="col-md-2"><%= t('view.details') %></th>
    <th class="col-md-2"><%= t('view.limit') %></th>
    <th class="col-md-2"><%= t('view.created_date') %></th>
    <th class="col-md-2">ステータス</th>
    <th class="col-md-2">優先順位</th>
  </tr>
  <% @tasks.each do |task| %>
    <tr class="each_contents row">
      <td class="task_name col-md-2"><%= task.title %></td>
      <td class="col-md-2"><%= task.details %></td>
      <td class="task_limit"><%= task.limit %></td>
      <td class="col-md-2"><%= l task.created_at %></td>
      <td class="col-md-2"><%= task.status %></td>
      <td class="task_priority"><%= task.priority %></td>
      <td class="col-md-2"><%= link_to "詳細", task_path(task.id), class: 'show_link' %></td>
      <td class="col-md-2"><%= link_to "編集", edit_task_path(task.id), class: 'edit_link' %></td>
      <td class="col-md-2"><%= link_to "削除", task_path(task.id), method: :delete, data: { confirm: "本当に削除しますか？" }, class: 'delete_link' %></td>
    </tr>
  <% end %>
</table>
<%= paginate @tasks %>
